(function(){var t,r,o=[].indexOf||function(t){for(var r=0,o=this.length;o>r;r++)if(r in this&&this[r]===t)return r;return-1},e={}.hasOwnProperty,n=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};t=Nib.Utils,Nib.Plugins.Base=function(){function r(t){this.editor=t,this.initEvents()}return r.prototype.validNodes=[],r.prototype.initEvents=function(){return void 0},r.prototype.validNode=function(t){var r;return r=t.nodeName.toLowerCase(),o.call(this.validNodes,r)>=0},r.prototype.selectionNodes=function(r){return null==r&&(r=[]),t.domNodes(r).filter(this.validNode.bind(this))},r.prototype.checkSelection=function(t){return null==t&&(t={}),this.selectionNodes(t.nodes).length>0},r.prototype.deactivate=function(){return void 0},r}(),Nib.Plugins.MetaKeyAction=function(t){function o(){return r=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.key=null,o.prototype.name=null,o.prototype.method="toggle",o.prototype.initEvents=function(){var t=this;return o.__super__.initEvents.call(this),this.editor.on("keydown",function(r,o){return(r.ctrlKey||r.metaKey)&&r.which===t.key?(r.preventDefault(),o[t.name][t.method]()):void 0})},o}(Nib.Plugins.Base)}).call(this),function(){var t,r,o={}.hasOwnProperty,e=function(t,r){function e(){this.constructor=t}for(var n in r)o.call(r,n)&&(t[n]=r[n]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};Nib.Plugins.Indent=function(r){function o(){return t=o.__super__.constructor.apply(this,arguments)}return e(o,r),o.prototype.validNodes=["blockquote"],o.prototype.toggle=function(){return this.editor.exec("indent")},o}(Nib.Plugins.Base),Nib.Plugins.Outdent=function(t){function o(){return r=o.__super__.constructor.apply(this,arguments)}return e(o,t),o.prototype.validNodes=["blockquote"],o.prototype.toggle=function(){var t;return t=this.editor.node.querySelector("blockquote"),t?t.outerHTML=t.innerHTML:void 0},o}(Nib.Plugins.Base)}.call(this),function(){var t,r={}.hasOwnProperty,o=function(t,o){function e(){this.constructor=t}for(var n in o)r.call(o,n)&&(t[n]=o[n]);return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t};Nib.Plugins.Link=function(r){function e(){return t=e.__super__.constructor.apply(this,arguments)}return o(e,r),e.prototype.validNodes=["a"],e.prototype.on=function(t){var r;return-1===t.indexOf("://")&&(t="http://"+t),r=this.editor.wrapped("a")||this.editor.wrap("a"),r.href=t,r},e.prototype.off=function(){return this.editor.unwrap("a")},e.prototype.getHref=function(){var t;return(t=this.editor.wrapped("a"))?t.href:void 0},e}(Nib.Plugins.Base)}.call(this),function(){var t,r,o,e,n,i,u,p={}.hasOwnProperty,s=function(t,r){function o(){this.constructor=t}for(var e in r)p.call(r,e)&&(t[e]=r[e]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};Nib.Plugins.Bold=function(r){function o(){return t=o.__super__.constructor.apply(this,arguments)}return s(o,r),o.prototype.name="bold",o.prototype.key=66,o.prototype.validNodes=["b","strong"],o.prototype.toggle=function(){return this.editor.exec("bold")},o}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Italic=function(t){function o(){return r=o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.name="italic",o.prototype.key=73,o.prototype.validNodes=["i","em"],o.prototype.toggle=function(){return this.editor.exec("italic")},o}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Underline=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.name="underline",r.prototype.key=85,r.prototype.validNodes=["u"],r.prototype.toggle=function(){return this.editor.exec("underline")},r}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Strikethrough=function(t){function r(){return e=r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.validNodes=["strike"],r.prototype.toggle=function(){return this.editor.exec("strikeThrough")},r}(Nib.Plugins.Base),Nib.Plugins.Subscript=function(t){function r(){return n=r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.validNodes=["sub"],r.prototype.toggle=function(){return this.editor.wrapped("sup")&&this.editor.unwrap("sup"),this.editor.wrapped("sub")?this.editor.unwrap("sub"):this.editor.wrap("sub")},r}(Nib.Plugins.Base),Nib.Plugins.Superscript=function(t){function r(){return i=r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.validNodes=["sup"],r.prototype.toggle=function(){return this.editor.wrapped("sub")&&this.editor.unwrap("sub"),this.editor.wrapped("sup")?this.editor.unwrap("sup"):this.editor.wrap("sup")},r}(Nib.Plugins.Base),Nib.Plugins.Bold2=function(t){function r(){return u=r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.validNodes=["b","strong"],r.prototype.toggle=function(){return this.editor.wrapped("b")?this.off():this.editor.wrapped("strong")?this.off("strong"):this.on()},r.prototype.on=function(){return this.editor.wrap("b")},r.prototype.off=function(t){return null==t&&(t="b"),this.editor.unwrap(t)},r}(Nib.Plugins.Base)}.call(this);