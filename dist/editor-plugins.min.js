var _,_ref,__indexOf=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};_=Nib.Utils,Nib.Plugins.Base=function(){function t(t){this.editor=t,this.initEvents()}return t.prototype.initEvents=function(){return void 0},t.prototype.validNode=function(t){var e;return e=t.nodeName.toLowerCase(),__indexOf.call(this.validNodes,e)>=0},t.prototype.selectionNodes=function(t){return null==t&&(t=[]),_.domNodes(t).filter(this.validNode.bind(this))},t.prototype.checkSelection=function(t){return null==t&&(t={}),this.selectionNodes(t.nodes).length>0},t.prototype.deactivate=function(){return void 0},t}(),Nib.Plugins.MetaKeyAction=function(t){function e(){return _ref=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.key=null,e.prototype.method="toggle",e.prototype.initEvents=function(){var t=this;return e.__super__.initEvents.call(this),this.editor.on("keydown",function(e,r){return(e.ctrlKey||e.metaKey)&&e.which===t.key?(e.preventDefault(),r[t.method]()):void 0})},e}(Nib.Plugins.Base);var _ref,_ref1,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Nib.Plugins.Indent=function(t){function e(){return _ref=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["blockquote"],e.prototype.toggle=function(){return this.editor.exec("indent")},e}(Nib.Plugins.Base),Nib.Plugins.Outdent=function(t){function e(){return _ref1=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["blockquote"],e.prototype.toggle=function(){var t;return t=this.editor.node.querySelector("blockquote"),t?t.outerHTML=t.innerHTML:void 0},e}(Nib.Plugins.Base);var _ref,_ref1,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Nib.Plugins.Link=function(t){function e(){return _ref=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["a"],e.prototype.toggle=function(t){return this.editor.exec("createLink",t)},e}(Nib.Plugins.Base),Nib.Plugins.Link2=function(t){function e(){return _ref1=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["a"],e.prototype.off=function(){return this.editor.unwrap("a")},e.prototype.on=function(t){var e;return-1===t.indexOf("://")&&(t="http://"+t),e=this.editor.wrapped("a")||this.editor.wrap("a"),e.href=t,e},e}(Nib.Plugins.Base);var _ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7,_ref8,__hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Nib.Plugins.Bold=function(t){function e(){return _ref=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.key=66,e.prototype.validNodes=["b","strong"],e.prototype.toggle=function(){return this.editor.exec("bold")},e}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Italic=function(t){function e(){return _ref1=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.key=73,e.prototype.validNodes=["i","em"],e.prototype.toggle=function(){return this.editor.exec("italic")},e}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Underline=function(t){function e(){return _ref2=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.key=85,e.prototype.validNodes=["u"],e.prototype.toggle=function(){return this.editor.exec("underline")},e}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Strikethrough=function(t){function e(){return _ref3=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["strike"],e.prototype.toggle=function(){return this.editor.exec("strikeThrough")},e}(Nib.Plugins.Base),Nib.Plugins.Subscript=function(t){function e(){return _ref4=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["sub"],e.prototype.toggle=function(){return this.editor.exec("subscript")},e}(Nib.Plugins.Base),Nib.Plugins.Superscript=function(t){function e(){return _ref5=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["sup"],e.prototype.toggle=function(){return this.editor.exec("superscript")},e}(Nib.Plugins.Base),Nib.Plugins.Bold2=function(t){function e(){return _ref6=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["b","strong"],e.prototype.toggle=function(){return this.editor.wrapped("b")?this.off():this.editor.wrapped("strong")?this.off("strong"):this.on()},e.prototype.on=function(){return this.editor.wrap("b")},e.prototype.off=function(t){return null==t&&(t="b"),this.editor.unwrap(t)},e}(Nib.Plugins.Base),Nib.Plugins.Link=function(t){function e(){return _ref7=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["a"],e.prototype.toggle=function(t){return this.editor.exec("createLink",t)},e}(Nib.Plugins.Base),Nib.Plugins.Link2=function(t){function e(){return _ref8=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.validNodes=["a"],e.prototype.on=function(t){var e;return-1===t.indexOf("://")&&(t="http://"+t),e=this.editor.wrapped("a")||this.editor.wrap("a"),e.href=t,e},e.prototype.off=function(){return this.editor.unwrap("a")},e}(Nib.Plugins.Base);