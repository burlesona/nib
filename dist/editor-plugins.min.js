(function(){var t,o,r=[].indexOf||function(t){for(var o=0,r=this.length;r>o;o++)if(o in this&&this[o]===t)return o;return-1},e={}.hasOwnProperty,n=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};t=Nib.Utils,Nib.Plugins.Base=function(){function o(t){this.editor=t,this.initEvents()}return o.prototype.validNodes=[],o.prototype.initEvents=function(){return void 0},o.prototype.validNode=function(t){var o;return o=t.nodeName.toLowerCase(),r.call(this.validNodes,o)>=0},o.prototype.selectionNodes=function(o){return null==o&&(o=[]),t.domNodes(o).filter(this.validNode.bind(this))},o.prototype.checkSelection=function(t){return null==t&&(t={}),this.selectionNodes(t.nodes).length>0},o.prototype.deactivate=function(){return void 0},o}(),Nib.Plugins.MetaKeyAction=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.key=null,r.prototype.name=null,r.prototype.method="toggle",r.prototype.initEvents=function(){var t=this;return r.__super__.initEvents.call(this),this.editor.on("keydown",function(o,r){return(o.ctrlKey||o.metaKey)&&o.which===t.key?(o.preventDefault(),r[t.name][t.method]()):void 0})},r}(Nib.Plugins.Base)}).call(this),function(){var t,o,r={}.hasOwnProperty,e=function(t,o){function e(){this.constructor=t}for(var n in o)r.call(o,n)&&(t[n]=o[n]);return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t};Nib.Plugins.Indent=function(o){function r(){return t=r.__super__.constructor.apply(this,arguments)}return e(r,o),r.prototype.validNodes=["blockquote"],r.prototype.toggle=function(){return this.editor.exec("indent")},r}(Nib.Plugins.Base),Nib.Plugins.Outdent=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.validNodes=["blockquote"],r.prototype.toggle=function(){var t;return t=this.editor.node.querySelector("blockquote"),t?t.outerHTML=t.innerHTML:void 0},r}(Nib.Plugins.Base)}.call(this),function(){var t,o={}.hasOwnProperty,r=function(t,r){function e(){this.constructor=t}for(var n in r)o.call(r,n)&&(t[n]=r[n]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};Nib.Plugins.Link=function(o){function e(){return t=e.__super__.constructor.apply(this,arguments)}return r(e,o),e.prototype.validNodes=["a"],e.prototype.on=function(t){var o;return-1===t.indexOf("://")&&(t="http://"+t),o=this.editor.wrapped("a")||this.editor.wrap("a"),o.href=t,o},e.prototype.off=function(){return this.editor.unwrap("a")},e.prototype.getHref=function(){var t;return(t=this.editor.wrapped("a"))?t.href:void 0},e}(Nib.Plugins.Base)}.call(this),function(){var t,o,r,e,n,i,u,p={}.hasOwnProperty,s=function(t,o){function r(){this.constructor=t}for(var e in o)p.call(o,e)&&(t[e]=o[e]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};Nib.Plugins.Bold=function(o){function r(){return t=r.__super__.constructor.apply(this,arguments)}return s(r,o),r.prototype.name="bold",r.prototype.key=66,r.prototype.validNodes=["b","strong"],r.prototype.toggle=function(){return this.editor.exec("bold")},r}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Italic=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.name="italic",r.prototype.key=73,r.prototype.validNodes=["i","em"],r.prototype.toggle=function(){return this.editor.exec("italic")},r}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Underline=function(t){function o(){return r=o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.name="underline",o.prototype.key=85,o.prototype.validNodes=["u"],o.prototype.toggle=function(){return this.editor.exec("underline")},o}(Nib.Plugins.MetaKeyAction),Nib.Plugins.Strikethrough=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.validNodes=["strike"],o.prototype.toggle=function(){return this.editor.exec("strikeThrough")},o}(Nib.Plugins.Base),Nib.Plugins.Subscript=function(t){function o(){return n=o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.validNodes=["sub"],o.prototype.toggle=function(){return this.editor.exec("subscript")},o}(Nib.Plugins.Base),Nib.Plugins.Superscript=function(t){function o(){return i=o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.validNodes=["sup"],o.prototype.toggle=function(){return this.editor.exec("superscript")},o}(Nib.Plugins.Base),Nib.Plugins.Bold2=function(t){function o(){return u=o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.validNodes=["b","strong"],o.prototype.toggle=function(){return this.editor.wrapped("b")?this.off():this.editor.wrapped("strong")?this.off("strong"):this.on()},o.prototype.on=function(){return this.editor.wrap("b")},o.prototype.off=function(t){return null==t&&(t="b"),this.editor.unwrap(t)},o}(Nib.Plugins.Base)}.call(this);